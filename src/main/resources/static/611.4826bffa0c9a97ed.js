"use strict";(self.webpackChunkAbogadosFront=self.webpackChunkAbogadosFront||[]).push([[611],{9611:(P,f,l)=>{l.r(f),l.d(f,{RegistrarBibliotecaModule:()=>B});var m=l(6895),g=l(3599),o=l(433),p=l(642),u=l(797),e=l(8256),h=l(8651),b=l(6940),C=l(7185);const v=["fileDropRef"];function M(i,a){if(1&i&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function _(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e._UZ(1,"img",21),e.TgZ(2,"div",22)(3,"h4",23),e._uU(4),e.qZA(),e.TgZ(5,"p",24),e._uU(6),e.qZA()(),e.TgZ(7,"img",25),e.NdJ("click",function(){const s=e.CHM(t).index,c=e.oxw();return e.KtG(c.deleteFile(s))}),e.qZA()()}if(2&i){const t=a.$implicit,n=e.oxw();e.xp6(4),e.hij(" ",null==t?null:t.name," "),e.xp6(2),e.hij(" ",n.formatBytes(null==t?null:t.size)," ")}}const O=[{path:"",component:(()=>{class i{constructor(t,n,r,s,c,d){this.bibliotecaService=t,this.clientesService=n,this.fb=r,this.toastr=s,this.ruta=c,this.router=d,this.files=[],this.editar=!1,this.mensajeSatisfactorio="satisfactorio"}ngOnInit(){this.listarCliente(),this.initForm()}listarCliente(){this.clientesService.getCliente().subscribe(t=>{this.lstCliente=t})}initForm(){this.form=this.fb.group({id:new o.NI(""),nombreArchivo:new o.NI("",o.kI.required),archivo:new o.NI("",o.kI.required),cliente:new o.NI("",o.kI.required)})}clickEnviar(){let r,t=new p.G,n=new u.c;t.id=this.form.get("id").value,t.nombreArchivo=this.form.get("nombreArchivo").value,n.id=this.form.get("cliente").value,t.cliente=n,r=this.files.find(s=>s.name),this.registrar(r,t)}registrar(t,n){this.bibliotecaService.crear(n,t).subscribe(r=>{this.toastr.success(this.mensajeSatisfactorio),this.form.reset(),this.router.navigateByUrl("listado-biblioteca")},r=>this.mensajeError(r))}mensajeError(t){console.log(t),this.toastr.error("Ha Ocurrido un Problema")}onFileDropped(t){this.prepareFilesList(t)}fileBrowseHandler(t){this.prepareFilesList(t)}deleteFile(t){this.files.splice(t,1)}prepareFilesList(t){for(const n of t)this.files.push(n),this.toastr.success("Archivo Subido");this.fileDropEl.nativeElement.value=""}formatBytes(t,n=2){if(0===t)return"0 Bytes";const s=n<=0?0:n,d=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,d)).toFixed(s))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][d]}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.O),e.Y36(b.Y),e.Y36(o.qu),e.Y36(C._W),e.Y36(g.gz),e.Y36(g.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-registrar-biblioteca"]],viewQuery:function(t,n){if(1&t&&e.Gf(v,5),2&t){let r;e.iGM(r=e.CRH())&&(n.fileDropEl=r.first)}},decls:30,vars:3,consts:[[1,"container-form"],[2,"text-align","center"],["onclick","location.href='listado-biblioteca';",1,"btn"],[1,"form",3,"formGroup"],[1,"align-center","d-flex","flex-column"],["for","cliente",1,"text-gray"],["name","cliente","id","cliente-select","required","","formControlName","cliente"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["for","bibliotecaDocumento",1,"text-gray"],["appDnd","",1,"dropzone","align-items-center","fileover",3,"fileDropped"],["type","file","id","fileDropRef",3,"change"],["fileDropRef",""],["for","fileDropRef"],[1,"files-list"],["class","single-file",4,"ngFor","ngForOf"],["for","name",1,"text-gray"],["type","text","name","name","required","","formControlName","nombreArchivo"],["type","submit",1,"btn","btn-form",3,"click"],[3,"value"],[1,"single-file"],["src","assets/imgs/ic-file.svg","width","45px","alt","file"],[1,"info"],[1,"name"],[1,"size"],["src","assets/imgs/ic-delete-file.svg","width","20px","alt","file",1,"delete",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"REGISTRAR ARCHIVO"),e.qZA(),e.TgZ(3,"div",1)(4,"button",2),e._uU(5," Listado de Archivos "),e.qZA()(),e.TgZ(6,"form",3)(7,"div",4)(8,"label",5),e._uU(9,"Seleccione un Cliente"),e.qZA(),e.TgZ(10,"select",6)(11,"option",7),e._uU(12,"--Seleccione un Cliente--"),e.qZA(),e.YNc(13,M,2,2,"option",8),e.qZA(),e.TgZ(14,"label",9),e._uU(15,"Subir Archivo"),e.qZA(),e.TgZ(16,"div",10),e.NdJ("fileDropped",function(s){return n.onFileDropped(s)}),e.TgZ(17,"input",11,12),e.NdJ("change",function(s){return n.fileBrowseHandler(s.target.files)}),e.qZA(),e.TgZ(19,"h3"),e._uU(20,"Drag and drop file Here to Upload"),e.qZA(),e.TgZ(21,"label",13),e._uU(22,"Or Select Files to Upload"),e.qZA()(),e.TgZ(23,"div",14),e.YNc(24,_,8,2,"div",15),e.qZA(),e.TgZ(25,"label",16),e._uU(26,"Nombre del Archivo"),e.qZA(),e._UZ(27,"input",17),e.TgZ(28,"button",18),e.NdJ("click",function(){return n.clickEnviar()}),e._uU(29," Guardar Archivo "),e.qZA()()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",n.form),e.xp6(7),e.Q6J("ngForOf",n.lstCliente),e.xp6(11),e.Q6J("ngForOf",n.files))},dependencies:[m.sg,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.Q7,o.sg,o.u],styles:["*[_ngcontent-%COMP%]{font-family:Arial Narrow,Arial,sans-serif}h1[_ngcontent-%COMP%]{text-align:center}.align-center[_ngcontent-%COMP%]{display:flex;justify-content:center}.text-gray[_ngcontent-%COMP%]{color:#868789}.container-form[_ngcontent-%COMP%]{padding:2rem 0;width:70%;margin:auto}.btn[_ngcontent-%COMP%]{background-color:#fe8910;color:#fff;padding:5px;border:none;width:65%;margin:.6rem 0 1rem;justify-content:center;border-radius:15px}.btn[_ngcontent-%COMP%]:hover{color:#f7f7f7;background-color:#868789}.btn-form[_ngcontent-%COMP%]{width:100%;padding:1rem}.form[_ngcontent-%COMP%]{width:65%;margin:0 auto}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{color:#1a1a1a;width:100%;background-color:#66666640;border:none;padding:.6rem;margin-bottom:1rem;border-radius:15px}.form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:#868789;padding:1rem;text-align:center;border-radius:15px}.form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{width:48%}.dropzone[_ngcontent-%COMP%]{width:100%;height:100%;padding:4rem;text-align:center;border:dashed 5px #868789;position:relative;margin:0 auto}.dropzone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.dropzone[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#f7f7f7;width:90%;background-color:#fe8910;padding:0 16px;border-radius:15px}.dropzone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#868789}.fileover[_ngcontent-%COMP%]{animation:shake 1s;animation-iteration-count:infinite}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;flex-grow:1}.single-file[_ngcontent-%COMP%]{display:flex;padding:.5rem;justify-content:space-between;align-items:center;border:dashed 1px #979797;margin-bottom:1rem}img.delete[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;align-self:flex-end}.name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#a4a4a4;margin:0;margin-bottom:.25rem}.info[_ngcontent-%COMP%]{width:100%}@media (max-width: 1023px){.container-form[_ngcontent-%COMP%]{width:70%}.btn[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]{width:100%}}@media (max-width: 767px){.container-form[_ngcontent-%COMP%]{width:80%}.btn[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]{width:100%}}"]}),i})()}];let x=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(O),g.Bz]}),i})(),B=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,x,o.u5,o.UX]}),i})()}}]);