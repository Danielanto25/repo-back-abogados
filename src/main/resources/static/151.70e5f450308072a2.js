"use strict";(self.webpackChunkAbogadosFront=self.webpackChunkAbogadosFront||[]).push([[151],{6151:(k,f,o)=>{o.r(f),o.d(f,{TableroTareaModule:()=>Y});var p=o(6895),u=o(3599),T=o(5226),C=o.n(T),m=o(2601),b=o(5508),t=o(8256),O=o(7191),v=o(2468),_=o(393),M=o(936),x=o(7185),P=o(8718);function w(e,r){if(1&e&&(t.TgZ(0,"th",8)(1,"div",9)(2,"p"),t._uU(3),t.qZA()()()),2&e){const a=r.$implicit;t.xp6(3),t.Oqu(a.estado)}}function Z(e,r){if(1&e){const a=t.EpF();t.TgZ(0,"span",23),t.NdJ("click",function(){t.CHM(a);const c=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.eliminar(c.tarea.id))}),t.qZA()}}function A(e,r){if(1&e&&t._UZ(0,"img",24),2&e){const a=t.oxw().$implicit;t.MGl("src","../../../../../assets/imgs/circulo-",a.color,".png",t.LSH)}}function F(e,r){if(1&e&&t._UZ(0,"img",25),2&e){const a=r.$implicit;t.hYB("src","https://ui-avatars.com/api/?name=",a.usuario.nombre,"  ",a.usuario.apellido,"",t.LSH)}}const S=function(e){return["/editar-tarea",e]};function y(e,r){if(1&e&&(t.TgZ(0,"div",12),t.YNc(1,Z,1,0,"span",13),t.TgZ(2,"div",14)(3,"p",15),t._uU(4),t.qZA(),t.TgZ(5,"button",16),t._UZ(6,"img",17),t.YNc(7,A,1,1,"img",18),t.qZA()(),t.TgZ(8,"div",19)(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"a",20),t._uU(12,"Link Acceso"),t.qZA(),t.TgZ(13,"div",21),t.YNc(14,F,1,2,"img",22),t.qZA()()()),2&e){const a=r.$implicit,i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","Terminado"==i.estado),t.xp6(3),t.Oqu(a.tarea.nombre),t.xp6(2),t.Q6J("routerLink",t.VKq(7,S,a.tarea.id)),t.xp6(1),t.Q6J("ngIf",2!=a.color),t.xp6(3),t.Oqu(a.tarea.descripcion),t.xp6(1),t.s9C("href",a.tarea.link,t.LSH),t.xp6(3),t.Q6J("ngForOf",a.responsables)}}function E(e,r){if(1&e&&(t.TgZ(0,"td",10),t.YNc(1,y,15,9,"div",11),t.qZA()),2&e){const a=r.$implicit;t.xp6(1),t.Q6J("ngForOf",a.tareas)}}const j=[{path:"",component:(()=>{class e{constructor(a,i,c,l,s,n){this.tareasService=a,this.agendarTareaService=i,this.estadoService=c,this.responsableService=l,this.toastr=s,this.logicaGuard=n,this.tareas=[],this.tablero=[],this.mensajeSatisfactorio="Satisfactorio"}ngOnInit(){this.listar()}listar(){const a=["Tarea","Ejecutando","Ejecutado","Revisado","Terminado"];if(this.logicaGuard.permisoValido([b.r.administrador])||this.logicaGuard.permisoValido([b.r.superAdmin]))console.log("admin"),this.agendarTareaService.getTareaDto().subscribe(i=>{a.forEach(c=>{let l=[];i.forEach(s=>{let{nombre:n}=s.agendarTarea.estado;if(n==c){let g=new m.s;g.tarea=s.agendarTarea.tarea,g.responsables=s.responsables;const d=(new Date(s.agendarTarea.fechaHoraFin).getTime()-new Date(s.agendarTarea.fechaHoraInicio).getTime())/864e5;g.color=d<1?0:1==d?1:2,l.push(g)}}),this.tablero.push({estado:c,tareas:l})})});else{console.log("no admin");const i=localStorage.getItem("usuario");this.agendarTareaService.getTareaEstadoUser(i).subscribe(c=>{a.forEach(l=>{let s=[];c.forEach(n=>{let{nombre:g}=n.agendarTarea.estado;if(g==l){let d=new m.s;d.tarea=n.agendarTarea.tarea,d.responsables=n.responsables;const h=(new Date(n.agendarTarea.fechaHoraFin).getTime()-new Date(n.agendarTarea.fechaHoraInicio).getTime())/864e5;d.color=h<1?0:1==h?1:2,s.push(d)}}),this.tablero.push({estado:l,tareas:s})})})}}eliminar(a){C().fire({title:"Est\xe1s seguro?",text:"No Podras Revertir!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, Eliminar!"}).then(i=>{let c;i.isConfirmed&&this.estadoService.getEstado().subscribe(l=>{l.forEach(n=>{"Reporte"==n.nombre&&(c=n.id)}),this.tareasService.pasarReporte(a,c).subscribe(n=>{this.toastr.success(this.mensajeSatisfactorio),this.tablero=[],this.listar()},n=>this.mensajeError(n))})})}mensajeError(a){console.log(a),this.toastr.error("Ha Ocurrido un Problema")}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(O.D),t.Y36(v.T),t.Y36(_.J),t.Y36(M.o),t.Y36(x._W),t.Y36(P.b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tablero-tarea"]],decls:13,vars:2,consts:[[1,"container-table"],[1,"title-button","d-flex","justify-content-center"],[1,"m-0"],["onclick","location.href='registrar-tarea';",1,"buttonTarea"],["src","../../../../../assets/imgs/Tarea.png","alt","Agendar Tarea"],[1,"table"],["scope","col","class","tr-table",4,"ngFor","ngForOf"],["class","tr-table",4,"ngFor","ngForOf"],["scope","col",1,"tr-table"],[1,"header-box"],[1,"tr-table"],["class","tarea-container mb-2",4,"ngFor","ngForOf"],[1,"tarea-container","mb-2"],["class","closeButton2",3,"click",4,"ngIf"],[1,"tarea-header","d-flex","justify-content-between","p-1"],[1,"m-0","align-self-center"],[1,"button-list"],["src","../../../../../assets/imgs/lapiz.png","alt","modificar",1,"img-list",3,"routerLink"],["class","img-estado",3,"src",4,"ngIf"],[1,"tarea-body"],["target","_blank",3,"href"],[1,"p-2"],["class","w-18 mr-2 mt-2 rounded-circle","alt","",3,"src",4,"ngFor","ngForOf"],[1,"closeButton2",3,"click"],[1,"img-estado",3,"src"],["alt","",1,"w-18","mr-2","mt-2","rounded-circle",3,"src"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"TABLERO DE TAREAS"),t.qZA(),t.TgZ(4,"button",3),t._UZ(5,"img",4),t.qZA()(),t.TgZ(6,"table",5)(7,"thead")(8,"tr"),t.YNc(9,w,4,1,"th",6),t.qZA()(),t.TgZ(10,"tbody")(11,"tr"),t.YNc(12,E,2,1,"td",7),t.qZA()()()()),2&a&&(t.xp6(9),t.Q6J("ngForOf",i.tablero),t.xp6(3),t.Q6J("ngForOf",i.tablero))},dependencies:[p.sg,p.O5,u.rH],styles:["*[_ngcontent-%COMP%]{font-family:Arial Narrow,Arial,sans-serif}h1[_ngcontent-%COMP%]{text-align:center}.title-button[_ngcontent-%COMP%]{margin:2rem 2rem .5rem}.buttonTarea[_ngcontent-%COMP%]{width:10%}.buttonTarea[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(57%) sepia(43%) saturate(2157%) hue-rotate(5deg) brightness(99%) contrast(102%);width:40%}.btn[_ngcontent-%COMP%]{background-color:#fe8910;color:#fff;padding:5px;border:none;width:50%;margin:.6rem 0 1.5rem;justify-content:center;border-radius:15px}.btn-delete[_ngcontent-%COMP%]{background-color:#868789;color:#fff;padding:5px;border:none;width:50%;margin:.6rem 0 1.5rem;justify-content:center;border-radius:15px}.btn-delete[_ngcontent-%COMP%]:hover{color:#f7f7f7;background-color:#fe8910}.btn[_ngcontent-%COMP%]:hover{color:#f7f7f7;background-color:#868789}.container-table[_ngcontent-%COMP%]{padding:.5rem 0;width:95%;margin:auto}table[_ngcontent-%COMP%]{width:100%;text-align:center}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;vertical-align:top;border:none}.header-box[_ngcontent-%COMP%]{background-color:#868789;color:#f7f7f7;font-weight:400;font-size:larger;padding:10px 0;width:100%;border-radius:15px}th[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-transform:uppercase}.tarea-container[_ngcontent-%COMP%]{width:100%;background-color:#f7f7f7;position:relative;border-radius:15px;border:2px solid #5e5e5e;border-top:none}.tarea-container[_ngcontent-%COMP%]   .closeButton2[_ngcontent-%COMP%]{background:url(cancel.6239190d101c8901.png) no-repeat;width:26px;height:26px;top:-9px;right:-9px;position:absolute;cursor:pointer}.tarea-header[_ngcontent-%COMP%]{background-color:#fe8910;color:#f7f7f7;border-radius:15px;margin:0}.tarea-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.part-text[_ngcontent-%COMP%]{text-align:center;width:50%;background-color:#fe8910;color:#f7f7f7}.w-18[_ngcontent-%COMP%]{width:18%}.rounded-circle[_ngcontent-%COMP%]{border:1.5px solid #1a1a1a}.tr-table[_ngcontent-%COMP%]{width:15%}.button-list[_ngcontent-%COMP%], .buttonTarea[_ngcontent-%COMP%]{border:none;background:none}.button-list[_ngcontent-%COMP%]{width:30%;display:flex;justify-content:space-around;align-items:center}.img-list[_ngcontent-%COMP%]{filter:invert(100%) sepia(90%) saturate(49%) hue-rotate(163deg) brightness(113%) contrast(94%);width:1.6rem}.img-estado[_ngcontent-%COMP%]{width:1.6rem}@media screen and (max-width: 1023px){table[_ngcontent-%COMP%]{display:block;overflow-x:auto}.tr-table[_ngcontent-%COMP%], .tarea-container[_ngcontent-%COMP%]{width:262px}.buttonTarea[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(57%) sepia(43%) saturate(2157%) hue-rotate(5deg) brightness(99%) contrast(102%);width:2rem}}"]}),e})()}];let B=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(j),u.Bz]}),e})(),Y=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,B]}),e})()}}]);