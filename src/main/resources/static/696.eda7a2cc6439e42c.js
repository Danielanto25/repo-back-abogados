"use strict";(self.webpackChunkAbogadosFront=self.webpackChunkAbogadosFront||[]).push([[696],{1696:(K,u,r)=>{r.r(u),r.d(u,{EditarTareaModule:()=>L});var h=r(6895),f=r(3599),i=r(433),T=r(2094),v=r(797),C=r(4688),b=r(7524),p=r(4618),x=r(5226),Z=r.n(x),_=r(9764);class O{}var M=r(3515),e=r(8256),P=r(2468),y=r(7191),A=r(393),w=r(5841),E=r(6940),U=r(3952),I=r(5763),N=r(2340),F=r(529);let S=(()=>{class o{constructor(t){this.http=t,this.URL=`${N.N.apiUrl}/comentario`}getComentarioId(t){return this.http.get(`${this.URL}/${t}`)}crear(t){return this.http.post(`${this.URL}`,t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(F.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var k=r(7185);const q=["fileDropRef"];function R(o,a){if(1&o&&(e.TgZ(0,"option",47),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function B(o,a){if(1&o&&(e.TgZ(0,"option",47),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function j(o,a){if(1&o&&(e.TgZ(0,"option",47),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function Y(o,a){if(1&o&&(e.TgZ(0,"div",48),e._UZ(1,"input",49),e.TgZ(2,"label",29),e._uU(3),e.qZA()()),2&o){const t=a.$implicit;e.xp6(1),e.s9C("value",t.id),e.xp6(2),e.Oqu(t.nombre)}}function J(o,a){if(1&o&&(e.TgZ(0,"option",47),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function z(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",50),e._UZ(1,"img",51),e.TgZ(2,"div",52)(3,"h4",53),e._uU(4),e.qZA(),e.TgZ(5,"p",54),e._uU(6),e.qZA()(),e.TgZ(7,"img",55),e.NdJ("click",function(){const c=e.CHM(t).index,l=e.oxw();return e.KtG(l.deleteFile(c))}),e.qZA()()}if(2&o){const t=a.$implicit,n=e.oxw();e.xp6(4),e.hij(" ",null==t?null:t.name," "),e.xp6(2),e.hij(" ",n.formatBytes(null==t?null:t.size)," ")}}function D(o,a){if(1&o&&(e.TgZ(0,"div",56)(1,"div",57),e._UZ(2,"img",58),e.TgZ(3,"div",59)(4,"p",60),e._uU(5),e.qZA(),e._UZ(6,"hr",61),e.TgZ(7,"p",62),e._uU(8),e.qZA()()()()),2&o){const t=a.$implicit;e.xp6(2),e.hYB("src","https://ui-avatars.com/api/?background=f19200&color=fff&name=",t.usuario.nombre," ",t.usuario.apellido,"",e.LSH),e.xp6(3),e.AsE(" ",t.usuario.nombre," ",t.usuario.apellido," "),e.xp6(3),e.hij(" ",t.texto," ")}}const H=[{path:"",component:(()=>{class o{constructor(t,n,s,c,l,d,m,g,$,Q,V,X){this.AgendarTareaService=t,this.tareaService=n,this.estadoTareaService=s,this.tipoTareaService=c,this.clientesService=l,this.estadoService=d,this.usuarioService=m,this.comentarioService=g,this.fb=$,this.toastr=Q,this.ruta=V,this.router=X,this.files=[],this.lstComentario=[],this.editar=!1,this.mensajeSatisfactorio="satisfactorio",this.id=Number(this.ruta.snapshot.paramMap.get("id"))}ngOnInit(){this.ListarTipoTarea(),this.listarCliente(),this.listarResponsables(),this.initForm(),this.showDiv(),this.toggle(),this.listarEstado(),this.listarPorId(this.id),this.listarComentarios(this.id)}listarPorId(t){this.AgendarTareaService.listarPorId(t).subscribe(n=>{this.form.get("id").setValue(n.tarea.id),this.form.get("agendarTareaId").setValue(n.id),this.form.get("tipoTarea").setValue(n.tarea.tipoTarea.id),this.form.get("nombreTarea").setValue(n.tarea.nombre),this.form.get("descripcion").setValue(n.tarea.descripcion),this.form.get("link").setValue(n.tarea.link),this.form.get("fechaInicio").setValue(n.fechaHoraInicio),this.form.get("fechaFin").setValue(n.fechaHoraFin),this.form.get("cliente").setValue(n.tarea.cliente.id),this.form.get("estado").setValue(n.estado.id)})}ListarTipoTarea(){this.tipoTareaService.getTipoTarea().subscribe(t=>{this.lstTipoTarea=t})}listarCliente(){this.clientesService.getCliente().subscribe(t=>{this.lstCliente=t})}listarEstado(){this.estadoTareaService.getEstado().subscribe(t=>{this.lstEstado=t.filter(n=>"Reporte"!=n.nombre)})}listarResponsables(){this.usuarioService.getUsuario().subscribe(t=>{this.lstResponsable=t})}listarComentarios(t){this.comentarioService.getComentarioId(t).subscribe(n=>{this.lstComentario=n})}initForm(){this.form=this.fb.group({id:new i.NI(""),agendarTareaId:new i.NI(""),tipoTarea:new i.NI(0,[i.kI.required,(0,p.o)(/0/i)]),numRadicado:new i.NI(""),nombreTarea:new i.NI("",i.kI.required),descripcion:new i.NI("",i.kI.required),link:new i.NI("",i.kI.required),fechaInicio:new i.NI("",i.kI.required),fechaFin:new i.NI("",i.kI.required),Responsable:new i.NI(0,[i.kI.required,(0,p.o)(/0/i)]),cliente:new i.NI(0,[i.kI.required,(0,p.o)(/0/i)]),archivo:new i.NI("",i.kI.required),estado:new i.NI(0,[i.kI.required,(0,p.o)(/0/i)]),comentario:new i.NI("")})}clickEnviar(){let m,t=new _.r,n=new C.X,s=new v.c,c=new b.w,l=new T.y,d=new M.S;n.id=this.form.get("id").value,n.nombre=this.form.get("nombreTarea").value,n.descripcion=this.form.get("descripcion").value,n.link=this.form.get("link").value,c.id=this.form.get("tipoTarea").value,n.tipoTarea=c,s.id=this.form.get("cliente").value,n.cliente=s,l.id=this.form.get("agendarTareaId").value,l.fechaHoraInicio=this.form.get("fechaInicio").value,l.fechaHoraFin=this.form.get("fechaFin").value,d.id=this.form.get("estado").value,l.estado=d,l.tarea=n,t.agendarTarea=l,t.tarea=n,m=this.files.find(g=>g.name),Z().fire({title:"Est\xe1s seguro?",text:"No Podras Revertir!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, Actualizar!"}).then(g=>{g.isConfirmed&&null!=m?this.modificar(m,t):this.modificarSinArchivo(t)})}modificar(t,n){this.tareaService.modificar(n,t).subscribe(s=>{this.toastr.success(this.mensajeSatisfactorio),this.form.reset(),this.router.navigateByUrl("tablero-tarea")},s=>this.mensajeError(s))}modificarSinArchivo(t){this.tareaService.modificarSinArchivo(t).subscribe(n=>{this.toastr.success(this.mensajeSatisfactorio),this.form.reset(),this.router.navigateByUrl("tablero-tarea")},n=>this.mensajeError(n))}clickComentario(){let t=new O,n=new C.X;t.texto=this.form.get("comentario").value,n.id=this.form.get("id").value,t.tarea=n,this.GuardarComentario(t)}GuardarComentario(t){this.comentarioService.crear(t).subscribe(n=>{this.toastr.success(this.mensajeSatisfactorio),this.form.get("comentario").reset(),this.listarComentarios(this.id)},n=>this.mensajeError(n))}mensajeError(t){console.log(t),this.toastr.error("Ha Ocurrido un Problema")}showDiv(){document.getElementById("chec")?.checked?document.getElementById("ResCheck").style.display="flex":document.getElementById("ResCheck").style.display="none"}toggle(){"3"==document.getElementById("tipoTarea-select").value?document.getElementById("radicado").style.display="block":document.getElementById("radicado").style.display="none"}onFileDropped(t){this.prepareFilesList(t)}fileBrowseHandler(t){this.prepareFilesList(t)}deleteFile(t){this.files.splice(t,1)}prepareFilesList(t){for(const n of t)this.files.push(n);this.fileDropEl.nativeElement.value=""}formatBytes(t,n=2){if(0===t)return"0 Bytes";const c=n<=0?0:n,d=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,d)).toFixed(c))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][d]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(P.T),e.Y36(y.D),e.Y36(A.J),e.Y36(w.$),e.Y36(E.Y),e.Y36(U.s),e.Y36(I.i),e.Y36(S),e.Y36(i.qu),e.Y36(k._W),e.Y36(f.gz),e.Y36(f.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-editar-tarea"]],viewQuery:function(t,n){if(1&t&&e.Gf(q,5),2&t){let s;e.iGM(s=e.CRH())&&(n.fileDropEl=s.first)}},decls:83,vars:9,consts:[[1,"container-form"],[2,"text-align","center"],["onclick","location.href='tablero-tarea';",1,"btn"],[1,"form",3,"formGroup"],[1,"d-flex","flex-column","align-center"],[1,"text-gray"],["name","tipoTarea","id","tipoTarea-select","formControlName","tipoTarea",3,"change"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["id","radicado"],["for","radicado",1,"text-gray"],["type","text","name","radicado","formControlName","numRadicado"],["for","name",1,"text-gray"],["type","text","name","name","formControlName","nombreTarea"],["for","descripcion",1,"text-gray"],["type","text","name","descripcion","cols","40","rows","5","formControlName","descripcion"],["for","link",1,"text-gray"],["type","text","name","link","formControlName","link"],[1,"d-flex","justify-content-between","row"],[1,"inputs","col-6"],["for","feinicio",1,"text-gray"],["type","datetime-local","name","feinicio","formControlName","fechaInicio"],["for","fefin",1,"text-gray"],["type","datetime-local","name","fefin","formControlName","fechaFin"],["for","responsable",1,"text-gray"],["name","responsable","id","responsable-select","formControlName","Responsable"],["for","cliente",1,"text-gray"],["name","cliente","id","cliente-select","formControlName","cliente"],[1,"d-flex","m-1"],["for","cliente",1,"text-gray","m-0"],["name","chec","type","checkbox","id","chec",1,"checkbox-res",3,"change"],["id","ResCheck",1,"justify-content-between","row","mb-2"],["class","d-flex col-3 align-items-center",4,"ngFor","ngForOf"],["name","estado","id","tipoTarea-select","formControlName","estado",3,"change"],["for","clientes",1,"text-gray"],["appDnd","",1,"dropzone","align-items-center","fileover",3,"fileDropped"],["type","file","id","fileDropRef","multiple","",3,"change"],["fileDropRef",""],["for","fileDropRef"],[1,"files-list"],["class","single-file",4,"ngFor","ngForOf"],[1,"btn","btn-form",3,"click"],[1,"comentarios","justify-content-center"],[1,"form-comentarios","d-flex","justify-content-end","flex-wrap",3,"formGroup"],["formControlName","comentario","name","","id","","rows","5","placeholder","Unete a la conversacion"],["type","button",1,"btn","btn-coment",3,"click"],["class","media d-flex flex-column",4,"ngFor","ngForOf"],[3,"value"],[1,"d-flex","col-3","align-items-center"],["name","chec","type","checkbox","id","chec",1,"checkbox",3,"value"],[1,"single-file"],["src","assets/imgs/ic-file.svg","width","45px","alt","file"],[1,"info"],[1,"name"],[1,"size"],["src","assets/imgs/ic-delete-file.svg","width","20px","alt","file",1,"delete",3,"click"],[1,"media","d-flex","flex-column"],[1,"user","d-flex","rounded","mb-2"],["alt","",1,"w-8","h-8","mr-2","rounded-full",3,"src"],[1,"media-body"],[1,"nombre"],[1,"m-0",2,"width","97%"],[1,"comentario"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"EDITAR TAREA"),e.qZA(),e.TgZ(3,"div",1)(4,"button",2),e._uU(5," Tablero de Tareas "),e.qZA()(),e.TgZ(6,"form",3)(7,"div",4)(8,"label",5),e._uU(9,"Tipo de Tarea"),e.qZA(),e.TgZ(10,"select",6),e.NdJ("change",function(){return n.toggle()}),e.TgZ(11,"option",7),e._uU(12,"--Seleccione un tipo de Tarea--"),e.qZA(),e.YNc(13,R,2,2,"option",8),e.qZA(),e.TgZ(14,"div",9)(15,"label",10),e._uU(16,"Numero de Radicado"),e.qZA(),e._UZ(17,"input",11),e.qZA(),e.TgZ(18,"label",12),e._uU(19,"Nombre de la Tarea"),e.qZA(),e._UZ(20,"input",13),e.TgZ(21,"label",14),e._uU(22,"Descripcion de la Tarea"),e.qZA(),e._UZ(23,"textarea",15),e.TgZ(24,"label",16),e._uU(25,"Link"),e.qZA(),e._UZ(26,"input",17),e.TgZ(27,"div",18)(28,"div",19)(29,"label",20),e._uU(30,"Selecciona Fecha y Hora de Inicio"),e.qZA(),e._UZ(31,"input",21),e.qZA(),e.TgZ(32,"div",19)(33,"label",22),e._uU(34,"Selecciona Fecha y Hora de Entrega"),e.qZA(),e._UZ(35,"input",23),e.qZA(),e.TgZ(36,"div",19)(37,"label",24),e._uU(38,"Responsable"),e.qZA(),e.TgZ(39,"select",25)(40,"option",7),e._uU(41,"-- Seleccione un Responsable --"),e.qZA(),e.YNc(42,B,2,2,"option",8),e.qZA()(),e.TgZ(43,"div",19)(44,"label",26),e._uU(45,"Cliente"),e.qZA(),e.TgZ(46,"select",27)(47,"option",7),e._uU(48,"-- Seleccione un Cliente --"),e.qZA(),e.YNc(49,j,2,2,"option",8),e.qZA()()(),e.TgZ(50,"div",28)(51,"label",29),e._uU(52,"Otro Responsables"),e.qZA(),e.TgZ(53,"input",30),e.NdJ("change",function(){return n.showDiv()}),e.qZA()(),e.TgZ(54,"div",31),e.YNc(55,Y,4,2,"div",32),e.qZA(),e.TgZ(56,"label",5),e._uU(57,"Estado de la Tarea"),e.qZA(),e.TgZ(58,"select",33),e.NdJ("change",function(){return n.toggle()}),e.TgZ(59,"option",7),e._uU(60,"--Seleccione un estado--"),e.qZA(),e.YNc(61,J,2,2,"option",8),e.qZA(),e.TgZ(62,"label",34),e._uU(63,"Subir Archivo"),e.qZA(),e.TgZ(64,"div",35),e.NdJ("fileDropped",function(c){return n.onFileDropped(c)}),e.TgZ(65,"input",36,37),e.NdJ("change",function(c){return n.fileBrowseHandler(c.target.files)}),e.qZA(),e.TgZ(67,"h3"),e._uU(68,"Drag and drop file Here to Upload"),e.qZA(),e.TgZ(69,"label",38),e._uU(70,"Or Select Files to Upload"),e.qZA()(),e.TgZ(71,"div",39),e.YNc(72,z,8,2,"div",40),e.qZA(),e.TgZ(73,"button",41),e.NdJ("click",function(){return n.clickEnviar()}),e._uU(74," Guardar Tarea "),e.qZA(),e.TgZ(75,"h3"),e._uU(76,"COMENTARIOS"),e.qZA(),e.TgZ(77,"div",42)(78,"form",43),e._UZ(79,"textarea",44),e.TgZ(80,"button",45),e.NdJ("click",function(){return n.clickComentario()}),e._uU(81," Comentar "),e.qZA()()(),e.YNc(82,D,9,5,"div",46),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",n.form),e.xp6(7),e.Q6J("ngForOf",n.lstTipoTarea),e.xp6(29),e.Q6J("ngForOf",n.lstResponsable),e.xp6(7),e.Q6J("ngForOf",n.lstCliente),e.xp6(6),e.Q6J("ngForOf",n.lstResponsable),e.xp6(6),e.Q6J("ngForOf",n.lstEstado),e.xp6(11),e.Q6J("ngForOf",n.files),e.xp6(6),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("ngForOf",n.lstComentario))},dependencies:[h.sg,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.sg,i.u],styles:["*[_ngcontent-%COMP%]{font-family:Arial Narrow,Arial,sans-serif}h1[_ngcontent-%COMP%]{text-align:center}.align-center[_ngcontent-%COMP%]{display:flex;justify-content:center}.text-gray[_ngcontent-%COMP%]{color:#868789}a[_ngcontent-%COMP%]{color:#fe8910!important}.container-form[_ngcontent-%COMP%]{padding:2rem 0;width:70%;margin:auto}.btn[_ngcontent-%COMP%]{background-color:#fe8910;color:#fff;padding:5px;border:none;width:65%;margin:.6rem 0 1rem;justify-content:center;border-radius:15px}.btn[_ngcontent-%COMP%]:hover{color:#f7f7f7;background-color:#868789}.btn-form[_ngcontent-%COMP%]{width:100%;padding:1rem}.form[_ngcontent-%COMP%]{width:65%;margin:0 auto}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{color:#1a1a1a;width:100%;background-color:#66666640;border:none;padding:.6rem;margin-bottom:1rem;border-radius:15px}textarea[_ngcontent-%COMP%]{resize:none}.form[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{width:10%;margin-bottom:0}.checkbox-res[_ngcontent-%COMP%]{width:5%!important;margin-bottom:0!important}.form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:#868789;text-align:center;border-radius:15px}.form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{width:48%}.dropzone[_ngcontent-%COMP%]{width:100%;height:100%;padding:4rem;text-align:center;border:dashed 5px #868789;position:relative;margin:0 auto}.dropzone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.dropzone[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#f7f7f7;width:90%;background-color:#fe8910;padding:0 16px;border-radius:15px}.dropzone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#868789}.fileover[_ngcontent-%COMP%]{animation:shake 1s;animation-iteration-count:infinite}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;flex-grow:1}.single-file[_ngcontent-%COMP%]{display:flex;padding:.5rem;justify-content:space-between;align-items:center;border:dashed 1px #979797;margin-bottom:1rem}img.delete[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;align-self:flex-end}.name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#a4a4a4;margin:0;margin-bottom:.25rem}.info[_ngcontent-%COMP%]{width:100%}.comentarios[_ngcontent-%COMP%]{margin:0 0 20px}.form-comentarios[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;max-width:100%;min-width:100%;padding:10px;line-height:30px;resize:none}.form-comentarios[_ngcontent-%COMP%]   .btn-coment[_ngcontent-%COMP%]{width:20%}.form-comentarios[_ngcontent-%COMP%]   .btn-coment[_ngcontent-%COMP%]:hover{box-shadow:0 0 9px #00000059}.user[_ngcontent-%COMP%]{width:100%;background-color:#66666640}.media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:10%;margin-right:20px}.media[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{color:#868789;font-weight:700;margin-bottom:0}.media[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#868789;margin-left:10px}.media[_ngcontent-%COMP%]   .comentario[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:0!important}.media[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]{margin-bottom:10px}.media[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#868789;font-size:14px;margin:0 20px;text-decoration:none}.media[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.eliminarComentario[_ngcontent-%COMP%]:hover{cursor:pointer}@media (max-width:1023px){.container-form[_ngcontent-%COMP%]{width:100%}.form[_ngcontent-%COMP%]{width:90%}}@media (max-width:767px){.container-form[_ngcontent-%COMP%]{width:100%}.form[_ngcontent-%COMP%]{width:90%}.contrato[_ngcontent-%COMP%]{flex-direction:column}.form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{width:100%}}"]}),o})()}];let G=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.Bz.forChild(H),f.Bz]}),o})(),L=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.ez,G,i.u5,i.UX]}),o})()}}]);